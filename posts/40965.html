<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/images/rainbow.png"><link rel="icon" href="/images/rainbow.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#fec8c9"><meta name="author" content="Rainbow"><meta name="keywords" content=""><meta name="description" content="AWS Command Line Interface (AWS CLI) æ˜¯ä¸€ç§å¼€æºå·¥å…·ï¼Œè®©æ‚¨èƒ½å¤Ÿåœ¨å‘½ä»¤è¡Œ Shell ä¸­ä½¿ç”¨å‘½ä»¤ä¸ AWS æœåŠ¡è¿›è¡Œäº¤äº’ã€‚æœäº†ä¸€ä¸‹æ„Ÿè§‰ç›¸å…³ä¸­æ–‡èµ„æ–™ä¸å¤ªå¤šï¼Ÿç‰¹åˆ«æ˜¯ version 2 çš„å‡ ä¹æ²¡æ‰¾åˆ°ã€‚å°±çœ‹å®˜æ–¹è‡ªå·±å­¦äº†å­¦ã€‚å†™ä¸€ç‚¹awscli s3 version2çš„å­¦ä¹ ç¬”è®°ï¼Œä¸€äº›å‘½ä»¤çš„ç®€å•ä»‹ç»ã€‚"><meta property="og:type" content="article"><meta property="og:title" content="awscli version 2å­¦ä¹ ç¬”è®°"><meta property="og:url" content="https://pawswrite.xyz/posts/40965.html"><meta property="og:site_name" content="Rainbow"><meta property="og:description" content="AWS Command Line Interface (AWS CLI) æ˜¯ä¸€ç§å¼€æºå·¥å…·ï¼Œè®©æ‚¨èƒ½å¤Ÿåœ¨å‘½ä»¤è¡Œ Shell ä¸­ä½¿ç”¨å‘½ä»¤ä¸ AWS æœåŠ¡è¿›è¡Œäº¤äº’ã€‚æœäº†ä¸€ä¸‹æ„Ÿè§‰ç›¸å…³ä¸­æ–‡èµ„æ–™ä¸å¤ªå¤šï¼Ÿç‰¹åˆ«æ˜¯ version 2 çš„å‡ ä¹æ²¡æ‰¾åˆ°ã€‚å°±çœ‹å®˜æ–¹è‡ªå·±å­¦äº†å­¦ã€‚å†™ä¸€ç‚¹awscli s3 version2çš„å­¦ä¹ ç¬”è®°ï¼Œä¸€äº›å‘½ä»¤çš„ç®€å•ä»‹ç»ã€‚"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2022-05-18T13:44:17.000Z"><meta property="article:modified_time" content="2022-11-04T06:14:39.177Z"><meta property="article:author" content="Rainbow"><meta property="article:tag" content="VPS"><meta property="article:tag" content="é•¿æ¯›è±¡è¿ç»´"><meta property="article:tag" content="Linux"><meta name="twitter:card" content="summary_large_image"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"><title>awscli version 2å­¦ä¹ ç¬”è®° - Rainbow</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"pawswrite.xyz",root:"/",version:"1.9.3",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Rainbow" type="application/atom+xml">
</head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Rainbow</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> é¦–é¡µ</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> å½’æ¡£</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> åˆ†ç±»</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> æ ‡ç­¾</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> å…³äº</a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> å‹é“¾</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/images/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="awscli version 2å­¦ä¹ ç¬”è®°"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-05-18 21:44" pubdate>2022å¹´5æœˆ18æ—¥ æ™šä¸Š</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 7.6k å­— </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 64 åˆ†é’Ÿ </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> æ¬¡</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">awscli version 2å­¦ä¹ ç¬”è®°</h1><p class="note note-info">æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2022å¹´11æœˆ4æ—¥ ä¸‹åˆ</p><div class="markdown-body"><p>AWS Command Line Interface (AWS CLI) æ˜¯ä¸€ç§å¼€æºå·¥å…·ï¼Œè®©æ‚¨èƒ½å¤Ÿåœ¨å‘½ä»¤è¡Œ Shell ä¸­ä½¿ç”¨å‘½ä»¤ä¸ AWS æœåŠ¡è¿›è¡Œäº¤äº’ã€‚æœäº†ä¸€ä¸‹æ„Ÿè§‰ç›¸å…³ä¸­æ–‡èµ„æ–™ä¸å¤ªå¤šï¼Ÿç‰¹åˆ«æ˜¯ <code>version 2</code> çš„å‡ ä¹æ²¡æ‰¾åˆ°ã€‚å°±çœ‹å®˜æ–¹è‡ªå·±å­¦äº†å­¦ã€‚å†™ä¸€ç‚¹<code>awscli s3 version2</code>çš„å­¦ä¹ ç¬”è®°ï¼Œä¸€äº›å‘½ä»¤çš„ç®€å•ä»‹ç»ã€‚</p><span id="more"></span><p>å‚è€ƒèµ„æ–™ï¼š</p><ol><li>å®˜æ–¹æ–‡æ¡£<a href="https://docs.aws.amazon.com/cli/latest/index.html" target="_blank" rel="noopener external nofollow noreferrer">AWS CLI Command Reference</a></li><li>å®˜æ–¹æ–‡æ¡£<a href="https://awscli.amazonaws.com/v2/documentation/api/latest/index.html" target="_blank" rel="noopener external nofollow noreferrer">AWS CLI Command Reference version 2</a></li><li>GitHub é¡¹ç›® <a href="https://github.com/aws/aws-cli" target="_blank" rel="noopener external nofollow noreferrer">aws-cli</a></li><li><a href="https://docs.aws.amazon.com/cli/latest/userguide/aws-cli.pdf#cli-chap-using" target="_blank" rel="noopener external nofollow noreferrer">User Guide for Version 2 pdf</a></li><li><a href="http://download.iteablue.com/21%E4%B8%AA%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E5%B7%A5%E5%85%B7%E8%B5%84%E6%96%99%E5%8C%85/AWS%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/AWS%20Command%20Line%20Interface%20%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97.pdf" target="_blank" rel="noopener external nofollow noreferrer">AWS Command Line Interfaceä¸­æ–‡ç”¨æˆ·æŒ‡å—</a></li><li>ã€æ¨èã€‘<a href="https://docs.aws.amazon.com/zh_cn/cli/latest/userguide/aws-cli.pdf#cli-chap-welcome" target="_blank" rel="noopener external nofollow noreferrer">AWS Command Line Interface ç‰ˆæœ¬ 2 çš„ç”¨æˆ·æŒ‡å—</a></li></ol><h2 id="å®‰è£…-version-1"><a href="#å®‰è£…-version-1" class="headerlink" title="å®‰è£… version 1"></a>å®‰è£… version 1</h2><p>AWS CLIæœ‰ä¸‰ç§å®‰è£…æ–¹å¼ã€‚</p><ol><li><p>pip<br>AWS CLI åœ¨ Linuxã€Windows å’Œ macOS ä¸Šçš„ä¸»è¦åˆ†å‘æ–¹å¼æ˜¯ pipï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äº Python çš„ç¨‹åºåŒ…ç®¡ç†<br>å™¨ï¼Œå¯æä¾›æ–¹ä¾¿çš„æ–¹å¼æ¥å®‰è£…ã€å‡çº§å’Œåˆ é™¤ Python ç¨‹åºåŒ…åŠå…¶ç›¸å…³ç»„ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install awscli --upgrade --user<br></code></pre></td></tr></table></figure></li><li><p>åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…ã€æ¨èã€‘<br>ç”¨rootç”¨æˆ·ä½¿ç”¨pipå¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œä¸€èˆ¬å»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆ*æˆ‘ä¸ªäººå–œæ¬¢ç”¨<code>anaconda</code>æˆ–è€…<code>miniconda</code>*ï¼‰ã€‚</p><ul><li>pipå®‰è£…virtualenv<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install --user virtualenv<br></code></pre></td></tr></table></figure></li><li>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶ä¸ºå…¶å‘½å<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">virtualenv ~/cli-ve<br></code></pre></td></tr></table></figure></li><li>æ¿€æ´»æ–°è™šæ‹Ÿç¯å¢ƒ<br>Linux, macOS, or Unix<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> ~/cli-ve/bin/activate<br></code></pre></td></tr></table></figure>Windows<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd"><span class="hljs-variable">%USERPROFILE%</span>\cli-ve\Scripts\activate<br></code></pre></td></tr></table></figure></li><li>å°† AWS CLI å®‰è£…åˆ°è™šæ‹Ÿç¯å¢ƒä¸­<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(cli-ve)~$ pip install --upgrade awscli<br></code></pre></td></tr></table></figure></li></ul><p>æ‚¨å¯ä»¥ä½¿ç”¨ deactivate å‘½ä»¤é€€å‡ºè™šæ‹Ÿç¯å¢ƒã€‚ä¸ç®¡ä½•æ—¶å¯åŠ¨æ–°ä¼šè¯ï¼Œéƒ½å¿…é¡»é‡æ–°æ¿€æ´»ç¯å¢ƒã€‚</p></li></ol><p>è¦å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œè¯·é‡æ–°è¿è¡Œå®‰è£…å‘½ä»¤ï¼š<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(cli-ve)~$ pip install --upgrade awscli<br></code></pre></td></tr></table></figure><br>3. æ†ç»‘å®‰è£…ç¨‹åº<p></p><p>éªŒè¯ AWS CLI æ˜¯å¦å·²æ­£ç¡®å®‰è£…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws --version<br></code></pre></td></tr></table></figure><h3 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h3><p>pip å¸è½½ï¼Œæˆ–è€…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo <span class="hljs-built_in">rm</span> -rf /usr/local/aws<br>sudo <span class="hljs-built_in">rm</span> /usr/local/bin/aws<br></code></pre></td></tr></table></figure><h2 id="å®‰è£…version2"><a href="#å®‰è£…version2" class="headerlink" title="å®‰è£…version2"></a>å®‰è£…version2</h2><p>AWS CLI ç‰ˆæœ¬ 2 æ˜¯ AWS CLI çš„æœ€æ–°ä¸»ç‰ˆæœ¬ï¼Œæ”¯æŒæ‰€æœ‰æœ€æ–°åŠŸèƒ½ã€‚ç‰ˆæœ¬ 2 ä¸­å¼•å…¥çš„æŸäº›åŠŸèƒ½æ— æ³•å‘åå…¼å®¹ç‰ˆ<br>æœ¬ 1ï¼Œæ‚¨å¿…é¡»å‡çº§æ‰èƒ½è®¿é—®è¿™äº›åŠŸèƒ½ã€‚AWS CLI ç‰ˆæœ¬ 2 ä»…å¯ä½œä¸ºæ†ç»‘å®‰è£…ç¨‹åºå®‰è£…ã€‚è™½ç„¶æ‚¨å¯èƒ½ä¼šåœ¨è½¯ä»¶åŒ…ç®¡ç†å™¨ä¸­æ‰¾åˆ°å®ƒï¼Œä½†è¿™äº›è½¯ä»¶åŒ…æ˜¯ä¸å—æ”¯æŒçš„éå®˜æ–¹è½¯ä»¶åŒ…ï¼Œå¹¶éç”±ç”Ÿäº§æˆ–ç®¡ç†AWS æˆ‘ä»¬å»ºè®®æ‚¨ä»…ä»æœ¬æŒ‡å—ä¸­è®°è½½çš„å®˜æ–¹ AWS CLI å‘è¡Œç‚¹å®‰è£…<br>AWSã€‚</p><h3 id="è„šæœ¬å®‰è£…"><a href="#è„šæœ¬å®‰è£…" class="headerlink" title="è„šæœ¬å®‰è£…"></a>è„šæœ¬å®‰è£…</h3><p>Linux x86 (64-bit)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot;</span> -o <span class="hljs-string">&quot;awscliv2.zip&quot;</span><br>unzip awscliv2.zip<br>sudo ./aws/install<br></code></pre></td></tr></table></figure><p>Linux ARM</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;https://awscli.amazonaws.com/awscli-exe-linux-aarch64.zip&quot;</span> -o <span class="hljs-string">&quot;awscliv2.zip&quot;</span><br>unzip awscliv2.zip<br>sudo ./aws/install<br></code></pre></td></tr></table></figure><p>éªŒè¯ AWS CLI æ˜¯å¦å·²æ­£ç¡®å®‰è£…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws --version<br></code></pre></td></tr></table></figure><h3 id="Dockerå®˜æ–¹é•œåƒå®‰è£…"><a href="#Dockerå®˜æ–¹é•œåƒå®‰è£…" class="headerlink" title="Dockerå®˜æ–¹é•œåƒå®‰è£…"></a>Dockerå®˜æ–¹é•œåƒå®‰è£…</h3><p>å®˜æ–¹ AWS CLI ç‰ˆæœ¬ 2 <code>Docker</code> é•œåƒæ‰˜ç®¡åœ¨ <code>amazon/aws-cli</code> å­˜å‚¨åº“ä¸­çš„ <code>DockerHub</code> ä¸Šã€‚é¦–æ¬¡ä½¿ç”¨ <code>docker run</code> å‘½ä»¤æ—¶ï¼Œæœ€æ–°çš„ <code>Docker</code> é•œåƒå°†ä¸‹è½½åˆ°æ‚¨çš„ç”µè„‘ã€‚<code>docker run</code> å‘½ä»¤çš„æ¯æ¬¡åç»­ä½¿ç”¨éƒ½ä¼šä»æœ¬åœ°å‰¯æœ¬è¿è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run --<span class="hljs-built_in">rm</span> -it amazon/aws-cli <span class="hljs-built_in">command</span><br></code></pre></td></tr></table></figure><p><em><strong>command</strong></em> æ›¿æ¢æˆä½ éœ€è¦çš„ <code>aws-cli</code> å‘½ä»¤</p><p>æ¯”å¦‚è¯´ï¼ŒéªŒè¯ AWS CLI æ˜¯å¦å·²æ­£ç¡®å®‰è£…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run --<span class="hljs-built_in">rm</span> -it amazon/aws-cli --version<br></code></pre></td></tr></table></figure><blockquote><p><code>--rm</code> â€“ æŒ‡å®šåœ¨å‘½ä»¤é€€å‡ºåæ¸…ç†å®¹å™¨ã€‚<br><code>-it</code> â€“ æŒ‡å®šè¦ä½¿ç”¨ æ‰“å¼€ä¼ª <code>TTY</code>ã€‚stdinè¿™å…è®¸æ‚¨åœ¨å®¹å™¨ä¸­è¿è¡Œ <code>AWS CLI ç‰ˆæœ¬ 2</code> æ—¶å‘å…¶æä¾›è¾“å…¥ï¼Œä¾‹å¦‚ï¼Œ<br>é€šè¿‡ä½¿ç”¨ aws configure å’Œ aws help å‘½ä»¤ã€‚å½“é€‰æ‹©æ˜¯å¦çœç•¥ <code>-it</code> æ—¶ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹äº‹é¡¹ï¼š<br>â€¢ å¦‚æœæ‚¨æ­£åœ¨è¿è¡Œè„šæœ¬ï¼Œåˆ™ä¸éœ€è¦ <code>-it</code>ã€‚<br>â€¢ å¦‚æœæ‚¨çš„è„šæœ¬é‡åˆ°é”™è¯¯ï¼Œåˆ™ä» <code>Docker</code> è°ƒç”¨ä¸­çœç•¥ <code>-it</code> ä¹Ÿè®¸èƒ½è§£å†³æ­¤é—®é¢˜ã€‚<br>â€¢ å¦‚æœæ‚¨æ­£åœ¨å°è¯•é€šè¿‡ç®¡é“å‘é€è¾“å‡ºï¼Œ-it å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯ï¼Œä» Docker è°ƒç”¨ä¸­çœç•¥ <code>-it</code> ä¹Ÿè®¸èƒ½è§£å†³æ­¤é—®é¢˜ã€‚å¦‚æœå¸Œæœ›ä¿ç•™ -it æ ‡å¿—ï¼Œä½†ä»æƒ³é€šè¿‡ç®¡é“å‘é€è¾“å‡ºï¼Œè¯·ç¦ç”¨ <code>AWS CLI</code> é»˜è®¤ä½¿ç”¨çš„å®¢æˆ·ç«¯åˆ†é¡µç¨‹åº (p. 109)ï¼Œåº”è¯¥èƒ½è§£å†³æ­¤é—®é¢˜ã€‚</p></blockquote><p>å¯ä»¥ä½¿ç”¨ -e æ ‡å¿—è°ƒç”¨ç‰¹å®šç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ã€‚è¦ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œè¯·æŒ‰åç§°è°ƒç”¨å®ƒã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">docker run --<span class="hljs-built_in">rm</span> -it -v ~/.aws:/root/.aws -e ENVVAR_NAME amazon/aws-cli s3 <span class="hljs-built_in">ls</span></span><br>2020-03-25 00:30:48 aws-cli-docker-demo<br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥ä½¿ç”¨ -e æ ‡å¿—è°ƒç”¨ç‰¹å®šç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ docker run --<span class="hljs-built_in">rm</span> -it -v ~/.aws:/root/.aws -e AWS_PROFILE amazon/aws-cli s3 <span class="hljs-built_in">ls</span><br>2020-03-25 00:30:48 aws-cli-docker-demo<br></code></pre></td></tr></table></figure><p>ç”¨åˆ«åç¼©çŸ­ Docker å‘½ä»¤ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-built_in">alias</span> aws=&#x27;docker <span class="hljs-built_in">run</span> <span class="hljs-comment">--rm -it amazon/aws-cli&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="å¿«é€Ÿé…ç½®"><a href="#å¿«é€Ÿé…ç½®" class="headerlink" title="å¿«é€Ÿé…ç½®"></a>å¿«é€Ÿé…ç½®</h2><p><code>aws configure</code> å‘½ä»¤æ˜¯è®¾ç½® <code>AWS CLI</code> å®‰è£…çš„æœ€å¿«æ–¹æ³•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ aws configure<br>AWS Access Key ID [None]: AKIAIOSFODNN7EXAMPLE<br>AWS Secret Access Key [None]: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY<br>Default region name [None]: us-west-2<br>Default output format [None]: json<br></code></pre></td></tr></table></figure><p>â€¢ è®¿é—®å¯†é’¥ ID (p. 32)<br>â€¢ ç§˜å¯†è®¿é—®å¯†é’¥ (p. 32)<br>â€¢ AWS åŒºåŸŸ (p. 33)<br>â€¢ è¾“å‡ºæ ¼å¼ (p. 33)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">```<br><span class="hljs-comment">## AWS CLI çš„å‘½åé…ç½®æ–‡ä»¶</span><br>é…ç½®æ–‡ä»¶é»˜è®¤ä¿å­˜åœ¨ `~/.aws` æ–‡ä»¶å¤¹ä¸­ï¼Œæœ‰ä¸¤ä¸ª `~/.aws/config` å’Œ `~/.aws/credentials`ã€‚<br>æ¯ä¸ªä¸­æ‹¬å·çš„ä¸€éƒ¨åˆ† `[]` å°±æ˜¯ä¸€ä¸ªå‘½åé…ç½®æ–‡ä»¶ï¼Œå¯å°†å¤šä¸ªå‘½åé…ç½®æ–‡ä»¶ï¼Œå­˜å‚¨åœ¨ `config` å’Œ `credentials` æ–‡ä»¶ä¸­ã€‚<br><br>config æ–‡ä»¶çš„å†…å®¹ç±»ä¼¼å¦‚ä¸‹ï¼š<br>```conf<br>[default]<br>region=us-west-2<br>output=json<br>[profile user1]<br>region=us-east-1<br>output=text<br></code></pre></td></tr></table></figure><blockquote><p>åœ¨ config æ–‡ä»¶ä¸­å‘½åé…ç½®æ–‡ä»¶æ—¶ï¼Œè¯·åŒ…æ‹¬å‰ç¼€è¯â€œprofileâ€ã€‚</p></blockquote><p>credentials æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs conf">[default]<br>aws_access_key_id=AKIAIOSFODNN7EXAMPLE<br>aws_secret_access_key=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY<br>[user1]<br>aws_access_key_id=AKIAI44QH8DHBEXAMPLE<br>aws_secret_access_key=je7MtGbClwBF/2Zp9Utk/h3yCo8nvbEXAMPLEKEY<br></code></pre></td></tr></table></figure><blockquote><p>åœ¨ credentials æ–‡ä»¶ä¸­åˆ›å»ºæ¡ç›®æ—¶ï¼Œ<strong>è¯·å‹¿</strong>ä½¿ç”¨å•è¯ profile<br>[default] é…ç½®æ–‡ä»¶ï¼Œä»¥åœ¨æ²¡æœ‰æ˜¾å¼å¼•ç”¨é…ç½®æ–‡ä»¶æ—¶ä½¿ç”¨</p></blockquote><p>å¯ä»¥é€šè¿‡åœ¨ aws configure (p. 36) ä¸­ä½¿ç”¨ â€“profile é€‰é¡¹æˆ–æ‰‹åŠ¨é€šè¿‡å‘ <code>config</code> å’Œ <code>credentials</code> æ–‡ä»¶ä¸­æ·»åŠ æ¡ç›®æ¥é…ç½®å…¶ä»–é…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">aws <span class="hljs-built_in">config</span> <span class="hljs-comment">--profile profile-name</span><br></code></pre></td></tr></table></figure><p>å°±ä¼šå¾€ <code>config</code> æ–‡ä»¶ä¸­å†™å…¥ <code>[profile profile-name]</code> çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨ <code>credentials</code> æ–‡ä»¶ä¸­å†™å…¥ <code>[profile-name]</code> çš„é…ç½®æ–‡ä»¶ã€‚</p><p>ç”¨åˆ«çš„å‘½ä»¤çš„æ—¶å€™ï¼Œåªéœ€è¦ä½¿ç”¨ <code>--profile profile-name</code> æŒ‡å®šé…ç½®æ–‡ä»¶åç§°å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªé…ç½®æ–‡ä»¶ã€‚</p><h2 id="aws-s3"><a href="#aws-s3" class="headerlink" title="aws s3"></a>aws s3</h2><p>Amazon S3 å°±æ˜¯ Amazon Simple Storage Service (Amazon S3)ã€‚AWS CLI æä¾›ä¸¤ä¸ªå‘½ä»¤æ¥è®¿é—® Amazon S3ï¼š<br>â€¢ s3 â€“ ç”¨äºç®€åŒ–å¸¸è§ä»»åŠ¡ï¼ˆå¦‚åˆ›å»ºã€æ“ä½œå’Œåˆ é™¤å¯¹è±¡åŠå­˜å‚¨æ¡¶ï¼‰çš„æ‰§è¡Œçš„é«˜çº§å‘½ä»¤ã€‚<br>â€¢ s3api â€“ æä¾›å¯¹æ‰€æœ‰ Amazon S3 API æ“ä½œçš„ç›´æ¥è®¿é—®ï¼Œä½¿æ‚¨èƒ½å¤Ÿæ‰§è¡Œé«˜çº§æ“ä½œã€‚</p><h3 id="mb-åˆ›å»ºå­˜å‚¨æ¡¶"><a href="#mb-åˆ›å»ºå­˜å‚¨æ¡¶" class="headerlink" title="mb åˆ›å»ºå­˜å‚¨æ¡¶"></a>mb åˆ›å»ºå­˜å‚¨æ¡¶</h3><p>ä½¿ç”¨ s3 mb å‘½ä»¤åˆ›å»ºå­˜å‚¨æ¡¶ã€‚å­˜å‚¨æ¡¶åç§°å¿…é¡»æ˜¯å…¨å±€ å”¯ä¸€çš„ï¼ˆåœ¨æ‰€æœ‰ Amazon S3 å­˜å‚¨æ¡¶ä¸­éƒ½æ˜¯å”¯ä¸€çš„ï¼‰ã€‚å­˜å‚¨æ¡¶åç§°å¯ä»¥åŒ…å«<em>å°å†™å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦å’Œç‚¹å·</em>ã€‚å­˜å‚¨æ¡¶åç§°åªèƒ½<em>ä»¥å­—æ¯æˆ–æ•°å­—å¼€å¤´å’Œç»“å°¾</em>ï¼Œè¿å­—ç¬¦æˆ–ç‚¹å·åä¸èƒ½è·Ÿç‚¹å·ã€‚</p><h4 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 mb &lt;target&gt; [--options]<br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 mb s3://bucket-name<br></code></pre></td></tr></table></figure><h3 id="ls-åˆ—å‡ºå­˜å‚¨æ¡¶å’Œå¯¹è±¡"><a href="#ls-åˆ—å‡ºå­˜å‚¨æ¡¶å’Œå¯¹è±¡" class="headerlink" title="ls åˆ—å‡ºå­˜å‚¨æ¡¶å’Œå¯¹è±¡"></a>ls åˆ—å‡ºå­˜å‚¨æ¡¶å’Œå¯¹è±¡</h3><p>è¦åˆ—å‡ºå­˜å‚¨æ¡¶ã€æ–‡ä»¶å¤¹æˆ–å¯¹è±¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">ls</span> &lt;target&gt; [--options]<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤é»˜è®¤ <code>endpoint</code> æ˜¯ <code>amazon</code> çš„ï¼Œæ‰€ä»¥ç”¨Scalewayçš„æ—¶å€™è¦åŠ ä¸Š <code>--endpoint-url=https://s3.ä½ çš„åœ°åŒº.scw.cloud</code> ã€‚</p><p>ç¤ºä¾‹ï¼š<br>åˆ—å‡ºæ‰€æœ‰å­˜å‚¨æ¡¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">ls</span> --endpoint-url=https://s3.ä½ çš„åœ°åŒº.scw.cloud<br></code></pre></td></tr></table></figure><p>å‘½ä»¤åˆ—å‡ºä¸€ä¸ªå­˜å‚¨æ¡¶ä¸­çš„æ‰€æœ‰å¯¹è±¡å’Œå‰ç¼€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">ls</span> s3://æ¡¶å --endpoint-url=https://s3.ä½ çš„åœ°åŒº.scw.cloud<br></code></pre></td></tr></table></figure><p>å‘½ä»¤åˆ—å‡ºä¸€ä¸ªå­˜å‚¨æ¡¶ä¸­æŸæ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼ˆå³ <code>æ¡¶å</code> ä¸­æŒ‰å‰ç¼€ <code>æ–‡ä»¶å¤¹å/</code> ç­›é€‰å‡ºçš„å¯¹è±¡ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">ls</span> s3://æ¡¶å/æ–‡ä»¶å¤¹å --endpoint-url=https://s3.ä½ çš„åœ°åŒº.scw.cloud<br></code></pre></td></tr></table></figure><h3 id="rb-åˆ é™¤å­˜å‚¨æ¡¶"><a href="#rb-åˆ é™¤å­˜å‚¨æ¡¶" class="headerlink" title="rb åˆ é™¤å­˜å‚¨æ¡¶"></a>rb åˆ é™¤å­˜å‚¨æ¡¶</h3><p>è¯­æ³•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 rb &lt;target&gt; [--options]<br></code></pre></td></tr></table></figure><p>ä»¥ä¸‹ç¤ºä¾‹åˆ é™¤ s3:&#x2F;&#x2F;bucket-name å­˜å‚¨æ¡¶ã€‚(å¦‚æœä½ çš„æ¡¶ä¸æ˜¯awsçš„è¯ï¼Œè®°å¾—åŠ ä¸Š <code>endpoint</code> )</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 rb s3://bucket-name --endpoint-url=https://s3.ä½ çš„åœ°åŒº.scw.cloud<br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå­˜å‚¨æ¡¶å¿…é¡»ä¸ºç©ºï¼Œæ­¤æ“ä½œæ‰èƒ½æˆåŠŸã€‚è¦åˆ é™¤ä¸ä¸ºç©ºçš„å­˜å‚¨æ¡¶ï¼Œæ‚¨å¿…é¡»åŒ…å« <code>--force</code> é€‰é¡¹ã€‚å¦‚<br>æœæ‚¨ä½¿ç”¨çš„æ˜¯å—ç‰ˆæœ¬æ§åˆ¶çš„å­˜å‚¨æ¡¶ï¼Œå³å…¶ä¸­åŒ…å«ä»¥å‰åˆ é™¤â€œä½†ä»ä¿ç•™â€çš„å¯¹è±¡ï¼Œåˆ™æ­¤å‘½ä»¤ ä¸ å…è®¸æ‚¨åˆ é™¤è¯¥å­˜å‚¨<br>æ¡¶ã€‚æ‚¨å¿…é¡»å…ˆåˆ é™¤æ‰€æœ‰å†…å®¹ã€‚</p><h3 id="rm-åˆ é™¤å¯¹è±¡"><a href="#rm-åˆ é™¤å¯¹è±¡" class="headerlink" title="rm åˆ é™¤å¯¹è±¡"></a>rm åˆ é™¤å¯¹è±¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">rm</span> &lt;target&gt; [--options]<br></code></pre></td></tr></table></figure><p>å°†ä» <code>s3://bucket-name/example</code> åˆ é™¤ <code>filename.txt</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">rm</span> s3://bucket-name/example/filename.txt --recursive<br></code></pre></td></tr></table></figure><h3 id="mv-ç§»åŠ¨å¯¹è±¡"><a href="#mv-ç§»åŠ¨å¯¹è±¡" class="headerlink" title="mv ç§»åŠ¨å¯¹è±¡"></a>mv ç§»åŠ¨å¯¹è±¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">mv</span> &lt;<span class="hljs-built_in">source</span>&gt; &lt;target&gt; [--options]<br></code></pre></td></tr></table></figure><p>å°†æ‰€æœ‰å¯¹è±¡ä» s3:&#x2F;&#x2F;bucket-name&#x2F;example ç§»åŠ¨åˆ° s3:&#x2F;&#x2F;my-bucket&#x2F;ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">mv</span> s3://bucket-name/example s3://my-bucket/<br></code></pre></td></tr></table></figure><p>å°†æœ¬åœ°æ–‡ä»¶ä»å½“å‰å·¥ä½œç›®å½•ç§»åŠ¨åˆ° Amazon S3 å­˜å‚¨æ¡¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">mv</span> filename.txt s3://bucket-name<br></code></pre></td></tr></table></figure><h3 id="cp-å¤åˆ¶å¯¹è±¡"><a href="#cp-å¤åˆ¶å¯¹è±¡" class="headerlink" title="cp å¤åˆ¶å¯¹è±¡"></a>cp å¤åˆ¶å¯¹è±¡</h3><p>å°†æ‰€æœ‰å¯¹è±¡ä» s3:&#x2F;&#x2F;bucket-name&#x2F;example å¤åˆ¶åˆ° s3:&#x2F;&#x2F;my-bucket&#x2F;ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">cp</span> s3://bucket-name/example s3://my-bucket/<br></code></pre></td></tr></table></figure><p>ä¾‹ä½¿ç”¨ s3 cp å‘½ä»¤ï¼Œå°†æœ¬åœ°æ–‡ä»¶ä»å½“å‰å·¥ä½œç›®å½•å¤åˆ¶åˆ° Amazon S3 å­˜å‚¨æ¡¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">cp</span> filename.txt s3://bucket-name<br></code></pre></td></tr></table></figure><p>å°†æ–‡ä»¶ä» Amazon S3 å­˜å‚¨æ¡¶å¤åˆ¶åˆ°å½“å‰å·¥ä½œç›®å½•ï¼Œå…¶ä¸­ .&#x2F; æŒ‡å®šå½“å‰çš„å·¥ä½œç›®å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">cp</span> s3://bucket-name/filename.txt ./<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ echo å°†æ–‡æœ¬â€œhello worldâ€æµå¼ä¼ è¾“åˆ° s3:&#x2F;&#x2F;bucket-name&#x2F;filename.txt æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello world&quot;</span> | aws s3 <span class="hljs-built_in">cp</span> - s3://bucket-name/filename.txt<br></code></pre></td></tr></table></figure><p>å°† s3:&#x2F;&#x2F;bucket-name&#x2F;filename.txt æ–‡ä»¶æµå¼ä¼ è¾“åˆ° stdoutï¼Œå¹¶å°†å†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">cp</span> s3://bucket-name/filename.txt -<br></code></pre></td></tr></table></figure><h3 id="sync-åŒæ­¥å¯¹è±¡"><a href="#sync-åŒæ­¥å¯¹è±¡" class="headerlink" title="sync åŒæ­¥å¯¹è±¡"></a>sync åŒæ­¥å¯¹è±¡</h3><p>åŒæ­¥ä¸€ä¸ªå­˜å‚¨æ¡¶ä¸ä¸€ä¸ªç›®å½•ä¸­çš„å†…å®¹ï¼Œæˆ–è€…åŒæ­¥ä¸¤ä¸ªå­˜å‚¨æ¡¶ä¸­çš„å†…å®¹ã€‚é€šå¸¸ï¼Œ<code>s3 sync</code> åœ¨æº<br>å’Œç›®æ ‡ä¹‹é—´<strong>å¤åˆ¶ç¼ºå¤±æˆ–è¿‡æ—¶çš„æ–‡ä»¶æˆ–å¯¹è±¡</strong>ã€‚ä¸è¿‡ï¼Œæ‚¨è¿˜å¯ä»¥æä¾› <code>--delete</code> é€‰é¡¹æ¥ä»ç›®æ ‡ä¸­åˆ é™¤æºä¸­ä¸å­˜åœ¨<br>çš„æ–‡ä»¶æˆ–å¯¹è±¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">sync</span> &lt;<span class="hljs-built_in">source</span>&gt; &lt;target&gt; [--options]<br></code></pre></td></tr></table></figure><p>æ›´æ–°ä¸ç›®æ ‡ä½ç½®ä¸­åŒåæ–‡ä»¶çš„å¤§å°æˆ–ä¿®æ”¹æ—¶é—´ä¸åŒçš„ä»»ä½•æ–‡ä»¶ã€‚è¾“å‡ºæ˜¾ç¤ºåœ¨åŒæ­¥æœŸé—´æ‰§è¡Œçš„æ“ä½œã€‚(æ³¨æ„ï¼Œå­æ–‡ä»¶å¤¹ä¹Ÿä¼šè¢«åŒæ­¥)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">sync</span> . s3://my-bucket/path<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">// Delete local file<br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">rm</span> ./MyFile1.txt</span><br>// Attempt sync without --delete option - nothing happens<br><span class="hljs-meta prompt_">$ </span><span class="language-bash">aws s3 <span class="hljs-built_in">sync</span> . s3://my-bucket/path</span><br>// Sync with deletion - object is deleted from bucket<br><span class="hljs-meta prompt_">$ </span><span class="language-bash">aws s3 <span class="hljs-built_in">sync</span> . s3://my-bucket/path --delete</span><br>delete: s3://my-bucket/path/MyFile1.txt<br>// Delete object from bucket<br><span class="hljs-meta prompt_">$ </span><span class="language-bash">aws s3 <span class="hljs-built_in">rm</span> s3://my-bucket/path/MySubdirectory/MyFile3.txt</span><br>delete: s3://my-bucket/path/MySubdirectory/MyFile3.txt<br>// Sync with deletion - local file is deleted<br><span class="hljs-meta prompt_">$ </span><span class="language-bash">aws s3 <span class="hljs-built_in">sync</span> s3://my-bucket/path . --delete</span><br>delete: MySubdirectory\MyFile3.txt<br>// Sync with Infrequent Access storage class<br><span class="hljs-meta prompt_">$ </span><span class="language-bash">aws s3 <span class="hljs-built_in">sync</span> . s3://my-bucket/path --storage-class STANDARD_IA</span><br></code></pre></td></tr></table></figure><h3 id="â€“options-é€‰é¡¹"><a href="#â€“options-é€‰é¡¹" class="headerlink" title="[â€“options]é€‰é¡¹"></a>[â€“options]é€‰é¡¹</h3><h4 id="recursive"><a href="#recursive" class="headerlink" title="recursive"></a>recursive</h4><p>ä½¿ç”¨æ­¤é€‰é¡¹æ—¶ï¼Œç³»ç»Ÿé’ˆå¯¹æ‰€æŒ‡å®šç›®å½•æˆ–å‰ç¼€ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æˆ–å¯¹è±¡æ‰§è¡Œè¯¥å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws s3 <span class="hljs-built_in">rm</span> s3://my-bucket/path --recursive<br></code></pre></td></tr></table></figure><h4 id="acl"><a href="#acl" class="headerlink" title="acl"></a>acl</h4><p><code>sync</code> å’Œ <code>cp</code> ä¸ºå¤åˆ¶åˆ° Amazon S3 çš„æ–‡ä»¶è®¾ç½®è®¿é—®æƒé™ã€‚<code>--acl</code> é€‰é¡¹æ¥å— <code>private</code>ã€<code>public-read</code> å’Œ <code>public-read-write</code> å€¼ã€‚</p><h4 id="exclude-include"><a href="#exclude-include" class="headerlink" title="exclude include"></a>exclude include</h4><p>ä½¿ç”¨ <code>s3 cp</code>ã€<code>s3 mv</code>ã€<code>s3 sync</code> æˆ– <code>s3 rm</code> å‘½ä»¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>--exclude</code> æˆ– <code>--include</code> é€‰é¡¹ç­›é€‰ç»“<br>æœã€‚</p><p><code>--exclude</code> é€‰é¡¹å°†è§„åˆ™è®¾ç½®ä¸ºä»…ä»å‘½ä»¤ä¸­æ’é™¤å¯¹è±¡ï¼Œå¹¶ä¸”ç³»ç»Ÿå°†æŒ‰ç…§æŒ‡å®šçš„é¡ºåºåº”ç”¨è¿™äº›é€‰é¡¹ã€‚</p><p><code>--include</code> é€‰é¡¹å°†è§„åˆ™è®¾ç½®ä¸ºä»…åŒ…æ‹¬ä¸ºå‘½ä»¤æŒ‡å®šçš„å¯¹è±¡ï¼Œå¹¶ä¸”ç³»ç»Ÿå°†æŒ‰ç…§æŒ‡å®šçš„é¡ºåºåº”ç”¨è¿™äº›é€‰<br>é¡¹ã€‚</p><h4 id="â€“grants"><a href="#â€“grants" class="headerlink" title="â€“grants"></a>â€“grants</h4><p><code>s3 cp</code>ã€<code>s3 mv</code> å’Œ <code>s3 sync</code> å‘½ä»¤åŒ…æ‹¬ä¸€ä¸ª <code>--grants</code> é€‰é¡¹ï¼Œå¯ç”¨æ¥å‘æŒ‡å®šçš„ç”¨æˆ·æˆ–ç»„æˆäºˆå¯¹å¯¹<br>è±¡çš„æƒé™ã€‚ä½¿ç”¨ä»¥ä¸‹è¯­æ³•å¯¹æƒé™åˆ—è¡¨è®¾ç½® <code>--grants</code> é€‰é¡¹ã€‚å°† <code>Permission</code>ã€<code>Grantee_Type</code> å’Œ<br><code>Grantee_ID</code> æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„å€¼ã€‚<br>è¯­æ³•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">--grants Permission=Grantee_Type=Grantee_ID<br> [Permission=Grantee_Type=Grantee_ID ...]<br></code></pre></td></tr></table></figure><p>æ¯ä¸ªå€¼éƒ½åŒ…å«ä»¥ä¸‹å…ƒç´ ï¼š<br>â€¢ å¯å¯ â€“ æŒ‡å®šæˆäºˆçš„æƒé™ã€‚å¯ä»¥è®¾ç½®ä¸º readã€readaclã€writeacl æˆ– fullã€‚<br>â€¢ Grantee_Type â€“ æŒ‡å®šå¦‚ä½•æ ‡è¯†è¢«æˆæƒè€…ã€‚å¯ä»¥è®¾ç½®ä¸º uriã€emailaddress æˆ– idã€‚<br>â€¢ Grantee_ID â€“ æ ¹æ® Grantee_Type.æŒ‡å®šè¢«æˆæƒè€…ã€‚<br>â€¢ uri â€“ ç»„ URIã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… è°æ˜¯æˆæƒè€…ï¼Ÿ<br>â€¢ emailaddress â€“ è´¦æˆ·çš„ç”µå­é‚®ä»¶åœ°å€ã€‚<br>â€¢ id â€“ è´¦æˆ·çš„è§„èŒƒ IDã€‚</p><h2 id="awscli-plugin-endpoint-æ’ä»¶"><a href="#awscli-plugin-endpoint-æ’ä»¶" class="headerlink" title="awscli-plugin-endpoint æ’ä»¶"></a>awscli-plugin-endpoint æ’ä»¶</h2><blockquote><p>Scaleway:<br><a href="https://www.scaleway.com/en/docs/storage/object/api-cli/object-storage-aws-cli/" target="_blank" rel="noopener external nofollow noreferrer">https://www.scaleway.com/en/docs/storage/object/api-cli/object-storage-aws-cli/</a><br>ä¸ºäº†æ›´æ–¹ä¾¿åœ°ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„S3æœåŠ¡å•†ï¼Œå¯ä»¥å®‰è£…æ’ä»¶ <code>awscli-plugin-endpoint</code>ã€‚åœ¨ä½¿ç”¨ <code>aws</code> å‘½ä»¤çš„æ—¶å€™å°±ä¸éœ€è¦å†æŒ‡å®šendpointã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install awscli-plugin-endpoint<br></code></pre></td></tr></table></figure><p>ä¹‹åè¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aws configure <span class="hljs-built_in">set</span> plugins.endpoint awscli_plugin_endpoint<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹<code>~/.aws/config</code>æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">[plugins]<br>endpoint = awscli_plugin_endpoint<br><br>[default]<br>region = nl-ams<br>s3 =<br>  endpoint_url = https://s3.nl-ams.scw.cloud<br>s3api =<br>  endpoint_url = https://s3.nl-ams.scw.cloud<br></code></pre></td></tr></table></figure><h2 id="s3api"><a href="#s3api" class="headerlink" title="s3api"></a>s3api</h2><p>AWS CLI å‚è€ƒï¼š<br>â€¢ aws s3api<br>â€¢ aws s3api put-bucket-acl<br>â€¢ aws s3api put-bucket-logging</p><p>â€¢ aws s3api<br>â€¢ aws s3api create-bucket<br>â€¢ aws s3api copy-object<br>â€¢ aws s3api delete-bucket<br>â€¢ aws s3api delete-object<br>â€¢ aws s3api head-bucket<br>â€¢ aws s3api list-objects<br>â€¢ aws s3api put-object</p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E5%AD%A6%E4%B9%A0%E6%98%AF%E4%BA%BA%E7%94%9F%E7%AC%AC%E4%B8%80%E8%A6%81%E5%8A%A1/" class="category-chain-item">å­¦ä¹ æ˜¯äººç”Ÿç¬¬ä¸€è¦åŠ¡</a> <span>></span> <a href="/categories/%E5%AD%A6%E4%B9%A0%E6%98%AF%E4%BA%BA%E7%94%9F%E7%AC%AC%E4%B8%80%E8%A6%81%E5%8A%A1/aws/" class="category-chain-item">aws</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/VPS/">#VPS</a> <a href="/tags/%E9%95%BF%E6%AF%9B%E8%B1%A1%E8%BF%90%E7%BB%B4/">#é•¿æ¯›è±¡è¿ç»´</a> <a href="/tags/Linux/">#Linux</a></div></div><div class="license-box my-3"><div class="license-title"><div>awscli version 2å­¦ä¹ ç¬”è®°</div><div>https://pawswrite.xyz/posts/40965.html</div></div><div class="license-meta"><div class="license-meta-item"><div>ä½œè€…</div><div>Rainbow</div></div><div class="license-meta-item license-meta-date"><div>å‘å¸ƒäº</div><div>2022å¹´5æœˆ18æ—¥</div></div><div class="license-meta-item"><div>è®¸å¯åè®®</div><div><a target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - ç½²å"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/posts/64380.html" title="marks"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">marks</span> <span class="visible-mobile">ä¸Šä¸€ç¯‡</span></a></article><article class="post-next col-6"><a href="/posts/26855.html" title="å®šæ—¶è·å–Scalewayçš„å­˜å‚¨æ¡¶å¤§å°ï¼Œå¹¶é€šè¿‡Barkæ¯æ—¥æ¨é€åˆ°iPhone"><span class="hidden-mobile">å®šæ—¶è·å–Scalewayçš„å­˜å‚¨æ¡¶å¤§å°ï¼Œå¹¶é€šè¿‡Barkæ¯æ—¥æ¨é€åˆ°iPhone</span> <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="waline"></div><script type="text/javascript">Fluid.utils.loadComments("#waline",(function(){Fluid.utils.createCssLink("https://lib.baomitu.com/waline/2.13.0/waline.min.css"),Fluid.utils.createScript("https://lib.baomitu.com/waline/2.13.0/waline.min.js",(function(){var i=Object.assign({serverURL:"https://mywaline.azurewebsites.net",path:"window.location.pathname",meta:["nick","mail","link"],requiredMeta:["nick"],lang:"zh-CN",emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],dark:'html[data-user-color-scheme="dark"]',wordLimit:0,pageSize:10,placeholder:"æ¬¢è¿ç•™ä¸‹ä½ çš„è¯„è®º ..."},{el:"#waline",path:window.location.pathname});Waline.init(i),Fluid.utils.waitElementVisible("#waline .vcontent",()=>{var i="#waline .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)})}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a title="æ— èŠæ¹¾ ğŸ¥± The Boring Bay" target="_blank" rel="noopener" href="https://boringbay.com"><img height="12px" src="https://boringbay.com/api/badge/pawswrite.xyz" srcset="/img/loading.gif" lazyload></a><script src="https://fastly.jsdelivr.net/gh/tech-fever/live2d-widget@latest/autoload.js"></script></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span> æ¬¡ </span><span id="busuanzi_container_site_uv" style="display:none">æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"></span> äºº</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.notyour3.repl.co/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div></noscript></body></html>